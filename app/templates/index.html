{% extends "base.html" %}


{% block content %}
	{% if current_user.is_authenticated %}
		<h2>Hi, {{ g.user.username }}!</h2>
		<form action="" method="post" name="post">
			{{ form.hidden_tag() }}
			<table>
				<tr>
					<td>Say something:</td>
					<td>{{ form.post(size=30, maxlength=140) }}</td>
					<td>
						{% for error in form.post.errors %}
							<span style="color: red;">[{{ error }}]</span><br>
						{% endfor %}
					</td>
				</tr>
				<tr>
					<td></td>
					<td><input type="submit" value="Post!"></td>
					<td></td>
				</tr>
			</table>
		</form>
		<h3>Your Posts:</h3>
		{% for post in posts.items %}
			{% if post.author.username == g.user.username %}
				<p>
					{% include 'post.html' %}
				</p>
			{% endif %}
		{% endfor %}
		{% if posts.has_prev %}
			<a href="{{ url_for('index', page=posts.prev_num) }}">&lt;&lt; Newer posts</a>
		{% else %}
			&lt;&lt; Newer posts
		{% endif %} | 
		{% if posts.has_next %}
			<a href="{{ url_for('index', page=posts.next_num) }}">Older posts &gt;&gt;</a>
		{% else %}
			Older posts &gt;&gt;
		{% endif %}
		<p><a href="{{ url_for('logout') }}">Logout</a></p>
	{% else %}
		<h2><a href="{{ url_for('login') }}">Login</h2>
		<h2><a href="{{ url_for('signup') }}">Signup</h2>
	{% endif %}
{% endblock %}